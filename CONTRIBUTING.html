<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Overview • suppdata</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Overview"><meta property="og:image" content="https://docs.ropensci.org/suppdata/logo.png"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="index.html">suppdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.1-9</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/suppdata/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.png" class="logo" alt=""><h1>Overview</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/suppdata/blob/HEAD/CONTRIBUTING.md" class="external-link"><code>CONTRIBUTING.md</code></a></small>
    </div>

<div id="overview" class="section level1">
<p>Thank you for your interest in contributing to <code>suppdata</code>! The most important contribution you can make to <code>suppdata</code> is to add code to download data from another publisher’s journals. There are five steps you have to go through to do that; I go through them in detail below, but briefly, they are:</p>
<ol style="list-style-type: decimal"><li>Write a download function for a publisher</li>
<li>Modify the DOI lookup function so it knows about your download function</li>
<li>Modify the documentation for <code>suppdata</code> so the user knows what you’ve done</li>
<li>Write a brief unit test checking your function works</li>
<li>Submit a pull request</li>
</ol><p>If you want to make a small change to <code>suppdata</code> (i.e., changing &lt;= 5 lines of code) fork the repo, make the change, and then make a pull request with the suggestion. If you want to make a more sweeping change (i.e., &gt; 5 lines of code) then <em>before writing any code</em> make an issue and discuss it with @willpearse. The purpose of this is to make maximal use of everyone’s time: small code changes are better off “just done” and then we can talk about it; larger changes require discussion before implementation. You’re quite welcome to do whatever you wish with the code (within the boundaries of the license, of course), but please be aware that the maintainers of the package are not obligate to accept all pull requests. Of course, the ROpenSci maintainer rules apply, so we’ll always be polite and we’ll always let you know why we make any decision! :D</p>
<p>When making version changes, please follow the standards set by CRAN, so the next version after “1.2-9” would be “1.2-10”. Package versions numbers are not decimal, so something like “1.2.9.5” won’t pass CRAN’s checks (<a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file" class="external-link">see the R extension guide</a>)</p>
<div class="section level2">
<h2 id="1-write-a-download-function-for-a-publisher">(1) Write a download function for a publisher<a class="anchor" aria-label="anchor" href="#1-write-a-download-function-for-a-publisher"></a></h2>
<p>All <code>suppdata</code> download functions start off with, at a minimum, something like:</p>
<pre class="{r}"><code>.suppdata.nameofpublisher &lt;- function(doi, si, save.name=NA, dir=NA, cache=TRUE, ...)</code></pre>
<p>…where <code>nameofpublisher</code> is replaced with the name of the publisher you’re loading data from. This should then be followed with something like:</p>
<pre class="{r}"><code><span><span class="co">#Argument handling</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">is.numeric</a></span><span class="op">(</span><span class="va">si</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"nameofpublisher download requires numeric SI info"</span><span class="op">)</span></span>
<span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu">.tmpdir</span><span class="op">(</span><span class="va">dir</span><span class="op">)</span></span>
<span><span class="va">save.name</span> <span class="op">&lt;-</span> <span class="fu">.save.name</span><span class="op">(</span><span class="va">doi</span>, <span class="va">save.name</span>, <span class="va">si</span><span class="op">)</span></span></code></pre>
<p>Note the name of the section (<code>#Argument handling</code>), and how we’re making sure the user gives us a supplement number if we need that, or using <code>is.character</code> if we’re expecting some <code>character SI info</code>. We have a few internal functions that should make your life easier (…well, they should…); <code>.tmp.dir</code> will make a temporary directory to save files out to for you, and <code>.save.name</code> will generate a sensible name to save files out to as well. It’s quite important that you use those functions, since they make the <code>cache</code> behaviour of the package work.</p>
<p>Next comes the hard work, where you get the data out of the publisher’s website. <a href="https://xkcd.com/208/" class="external-link">This is a lot of regular expression kung-foo</a>; you may find the functions <code>.grep.url</code>, <code>.grep.text</code>, <code>.url.redir</code>, and all the other functions in <a href="https://github.com/willpearse/suppdata/blob/master/R/utils.R" class="external-link"><code>utils.R</code></a> useful. Please do have a poke around in there, and feel free to add any functions you think are missing (using the <code>.name.function.</code> convention for non-user-facing functions). If there’s something you think would be useful to have, and you don’t know how to write it, then just make an issue, tag me (@willpearse), and I’ll see what I can do.</p>
<p>Finally, you need to return to the user a location of the file they want. Something like:</p>
<pre class="{r}"><code><span><span class="va">destination</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">dir</span>, <span class="va">save.name</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="reference/suppdata-internal.html">.download</a></span><span class="op">(</span><span class="va">url</span>, <span class="va">dir</span>, <span class="va">save.name</span>, <span class="va">cache</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>…should suffice. Notice how we’re using <code>R</code>’s <code>file.path</code> to make a sensible path on all distributions, and we’re using the internal <code>.download</code> to download the file, and so guaranteeing that we’ll obey all the <code>cache</code> instructions etc. We’re also ensuring that the user will get sensible filename information (“oooh, this looks like a .csv file”) as an attribute by using <code>.download</code>.</p>
<p>Save your function in <a href="https://github.com/willpearse/suppdata/blob/master/R/journals.R" class="external-link"><code>journals.R</code></a>. There are plenty of examples in there if you get stuck. There is also a list of functions to be written sitting in the issues section on GitHub.</p>
<p>There is a ‘hit list’ of publishers that it would be great to write wrappers for up in the issues page - <a href="https://github.com/willpearse/suppdata/issues/2" class="external-link">click this link to see it</a>.</p>
</div>
<div class="section level2">
<h2 id="2-modify-the-doi-lookup-function-so-it-knows-about-your-download-function">(2) Modify the DOI lookup function so it knows about your download function<a class="anchor" aria-label="anchor" href="#2-modify-the-doi-lookup-function-so-it-knows-about-your-download-function"></a></h2>
<p>We’re nearly there now, I promise! <code>suppdata</code> uses <code>rcrossref</code> to look up articles’ publishers, so to hook your download function into the package you’re going to have to figure out your journal’s code. Take a paper’s DOI that you know works, and run the following on it (replacing the DOI below with the DOI you’re checking):</p>
<pre class="{r}"><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rcrossref/" class="external-link">rcrossref</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/rcrossref/reference/cr_works.html" class="external-link">cr_works</a></span><span class="op">(</span><span class="st">"10.1111/j.1461-0248.2009.01307.x"</span><span class="op">)</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">member</span></span></code></pre>
<p>…that number is your publisher’s code. Modify the first <code>switch</code> statement in <code>suppdata.func</code> in <a href="https://github.com/willpearse/suppdata/blob/master/R/utils.R" class="external-link"><code>utils.R</code></a> to add your journal’s number (as a character string) and then match it with the name of your download function. If that sounds complicated, once you open the function it will become obvious.</p>
<p>Next, modify the second (and last) <code>switch</code> in the same function to work if your publisher is known by name. This should match onto your function’s name. So, for example, if your publishing company were called <em>Pearse Publishing</em>, and you’d called your function <code>.suppdata.pearse</code>, then you would add an entry like:</p>
<pre class="{r}"><code><span><span class="st">"pearse"</span> <span class="op">=</span> <span class="va">.suppdata.pearse</span></span></code></pre>
<p>Please remember that <code>case</code> statements are separated by commas; add a comma to the previous entry to keep the code syntactically correct!</p>
</div>
<div class="section level2">
<h2 id="3-modify-the-documentation-for-suppdata-so-the-user-knows-what-youve-done">(3) Modify the documentation for <code>suppdata</code> so the user knows what you’ve done<a class="anchor" aria-label="anchor" href="#3-modify-the-documentation-for-suppdata-so-the-user-knows-what-youve-done"></a></h2>
<p>Modify the <code>roxygen</code> documentation <a href="https://github.com/willpearse/suppdata/blob/master/R/suppdata.R#L17" class="external-link">here</a> and <a href="https://github.com/willpearse/suppdata/blob/master/man-roxygen/suppdata.R#L27" class="external-link">here</a> to give the user information about what your function expects (<code>numeric</code> vs. <code>character</code> SI information). Re-build the documentation when you’re done by running something like:</p>
<pre class="{r}"><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://roxygen2.r-lib.org/" class="external-link">roxygen2</a></span><span class="op">)</span></span>
<span><span class="fu">roxygenize</span><span class="op">(</span><span class="st">"path/to/suppdata"</span><span class="op">)</span></span></code></pre>
<p>…if you’re an RStudio person there’s a button for this in the “Build” tab (“More” &gt; “Document”). If you’re an emacs person like me, there are several and you probably have a strong opinion about which is best :p</p>
</div>
<div class="section level2">
<h2 id="4-write-a-brief-unit-test-checking-your-function-works">(4) Write a brief unit test checking your function works<a class="anchor" aria-label="anchor" href="#4-write-a-brief-unit-test-checking-your-function-works"></a></h2>
<p>Add tests to <a href="https://github.com/willpearse/suppdata/blob/master/tests/testthat/" class="external-link"><code>tests/testthat/</code></a> with a file of the format <code>test-&lt;name of publisher&gt;.R</code> (see existing tests to get started) to give the maintainers and the continuous integration services something to check that the publisher works.</p>
</div>
<div class="section level2">
<h2 id="5-add-publisher-to-list-in-readme">(5) Add publisher to list in README<a class="anchor" aria-label="anchor" href="#5-add-publisher-to-list-in-readme"></a></h2>
<p>Add the newly supported publisher to the alphabetically ordered list in <code>README.md</code>.</p>
</div>
<div class="section level2">
<h2 id="6-submit-a-pull-request">(6) Submit a pull request<a class="anchor" aria-label="anchor" href="#6-submit-a-pull-request"></a></h2>
<p>Commit your changes, then make a pull request to the <code>master</code> branch of <code>suppdata</code>. If you need help figuring out how to do that, <a href="https://help.github.com/articles/creating-a-pull-request/" class="external-link">take a look at this website</a>.</p>
</div>
<div class="section level2">
<h2 id="optional-bask-in-glory">(optional) Bask in glory<a class="anchor" aria-label="anchor" href="#optional-bask-in-glory"></a></h2>
<p>Thank you for helping make <code>suppdata</code> better!!!</p>
</div>
<div class="section level2">
<h2 id="side-note-history-of-the-package">(side-note) History of the package<a class="anchor" aria-label="anchor" href="#side-note-history-of-the-package"></a></h2>
<p>I always think a little history is useful when contributing to a package, so let me tell you how the code here came to be. Originally, this package was called <code>grabr</code> (this repo is the same repo, the name alone changed), which was then merged into <a href="https://github.com/ropensci/fulltext/" class="external-link"><code>fulltext</code></a>. At that time, the structure was changed to match that of <code>fulltext</code>, but this code was then pulled back <em>out</em> of <code>fulltext</code>. So if you ever find yourself wondering “why does it do that?”, the answer is probably “because <code>fulltext</code> does”.</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

